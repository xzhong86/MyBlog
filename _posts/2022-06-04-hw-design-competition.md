---
layout: post
title: 设计大赛回顾
---
# 设计大赛回顾

这边自2019年开始就每年进行一次设计大赛（数字电路设计），也包括验证的题目。我虽然工作性质为软件开发，但是职位确是芯片设计，所以也参加设计大赛。

## 第一次参赛

2019年第一次参加设计大赛。19年时忙碌的一年，涉A事件导致部门大变动，下半年在西安扩招，导致有很多新人要带，同时我还负责L2模块的性能交付，特别忙。
所以一开始没有打算认真搞设计大赛。

这样没啥准备就到了结束前两周，说是必须参加，于是两周内投入了很多时间去做。之前就接触过verilog，看波形调试也都要看它，但是真正用来做设计还是头一回。
包着Verilog的书籍学习这个语言还是很快的，但是这跟软件编程有者本质不同。

两周又是学习又是写代码，调试功能，好不容易才把功能调通，时间也只剩一两天了。于是，这时候开始做RTL综合，这一下发现问题可大了。我写Verilog完全当作一门
编程语言再用，而且多用高级语法，其结果就是 综合过不去，此外还有各种复位信号的问题，真是坑啊。

最后没有通过比赛的门槛。

## 第二次参赛

2020年第二次参加设计大赛，这次提前一个月就开始写了，投入时间更多，决心做出数一数二的成绩，就算面积功耗差，性能也要最强。

这次吸取之前的教训，没有使用任何Verilog高级语法，只是用最简单可靠的写法，然后结合ruby/erb进行嵌套生成Verilog代码，如此可以完成复杂的设计。

功夫不负有心人，这次大约两周就完成了四管线高性能设计，面积功耗确实很大，但是性能是我所问过的人里面最高的。比赛要是这么走向尾声我也没有遗憾了。

结果，大赛第一阶段结束后，测试环境进行了更新，数据包输入频率被定死在了1GHz，虽然还是四路输入，但是频率锁死后输入吞吐量明显下降，导致我2.1GHz
左右的四管线处理能力根本喂不满，反而是单管线高频率的设计占尽优势（面积功耗都低）。

不出所料，这次比赛最终上榜的都是单管线简单设计的方案。后面都在比拼面积功耗优化，这对于我们完全陌生。

## 第三次参赛

2021年第三次参加设计大赛。这次也比较坎坷，一开始计划好好投入参与，结果比赛前就开始出现人事变动，光处理这些事情就又让我喝一壶。后来决定设计大赛
做一个简单的设计就好了。

而且，第二次就有人用chisel了，这次我也想学习使用chisel，也当学习新知识了。

这次依然可以搞四发射设计，考虑到我时间有限，还要学习chisel，这次就决定做一个单发射的方案了。而且造化弄人，这次大赛的规则做了修正，对于高性能
方案单独有个性能比拼的分组，然而我却没有精力去做一个高性能方案了。

学习chisel比较痛苦，还得学习前置技能scala。不过scala让我又学到一些前沿知识，关于语法的。

使用chisel要简单很多，而且可靠，基本没有综合的问题。功能调试还是要花些时间，整体搞下来两周也调通了。功能调通之后，有时间还会优化一下性能（
为解决队列头阻塞，加入了乱序发射，就成了单发乱序的怪咖了），面积功耗什么的也做了些简单优化。

最后这次大赛性能板块不出所料都是四发射排前面，功耗面积也有加成，性能占比最大。 不过我看了看，单发射方案里面我的综合评分和性能已经最高了，并且
评分超过一半多的四发射设计，我也满足了。
