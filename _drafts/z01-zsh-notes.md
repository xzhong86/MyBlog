# Zsh 技术备忘

> 在2025年6月开始离职后生活，开始使用MacBook作为主力电脑，zsh的使用就是家常便饭了，这里记录一些备忘信息。

## 我的技术背景

撰文时，已经工作十多年，主要开发环境时Linux，熟悉Bash Csh 两个Shell环境。
故一些基础知识我可能就不会特别说明了，主要是我也意识不到。

## Zsh 相关

### 配置文件

在zsh手册总Files章节提到了相关配置文件：

| 配置文件 | 顺序 | 会话 | 说明                                                 |
|:---------|------|------|:-----------------------------------------------------|
| zshenv   | 1    | 所有 | 通常用于设置全局的环境变量                           |
| zprofile | 2    | 登录 | 通常用于设置仅在登录时需要的配置 |
| zshrc    | 3    | 所有 | 主要配置文件，配置命令行补全、别名、插件、主题 等    |
| zlogin   | 4    | 登录 | 通常用于设置一些在登录时需要执行的命令               |
| zlogout  | -    | 登录 | 清理登录时启动的服务或执行一些退出时需要的操作       |

“会话”标记的是会加载文件的情况，“所有”包括登录会话和非登录会话。

每个配置文件都有用户目录的 '~/.zshrc' 版本和系统的 '/etc/zshrc' 版本。


### 变量和环境变量

基本和bash用法一致
- `var=123` 变量、等号、值之间没有空格
- `export var=123` 导出为环境变量
- `unset var` 删除变量、环境变量
- `${NAME:-"Default"}` 获取变量值，如果没有设置变量则使用给出的默认值
- `${NAME/AA/BBB}` 获取变量时将变量中的AA替换为BBB （字符串替换）


### 函数编写

整体上和bash一样，这里说一些我关注的点：
- `$1 ... $9 $* $# $@` 等参数变量 
- `local var="hello"` 设置局部变量
- 函数内可以嵌套定义函数
- `unset -f func_name` 删除函数定义


